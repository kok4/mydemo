package internal

/*
替换字符串
	${REG_MSG_CREATORS}
	${ADD_MSG_PROC_FUNS}
末尾增加函数
*/

const kTemplateServer = `
package gensvr

// Code generated by gen. Do not edit!
// 代码由 gen 生成。不要手工编辑！

import (
	"${CURRENT_IMPORT_DIR}gensvr/internal"
	"zeus/net/server"
)

type Server = server.Server
type IMsg = server.IMsg
type ISession = server.ISession

// 使用 gensvr.New() 创建服务器可以保证注册了所有消息和处理器。
func New(protocal string, addr string, maxConns int) (*Server, error) {
	svr, err := server.New(protocal, addr, maxConns)
	if err != nil {
		return nil, err
	}

	// 注册消息创建器，用于接收数据后创建消息。${REG_MSG_CREATORS}

	// 添加MsgProc, 这样新连接创建时会
	// CloneAndRegisterMsgProcFunctions() 注册所有处理函数。${ADD_MSG_PROC_FUNS}

	return svr, nil
}
`
